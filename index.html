<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Study Hub</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
body{background:#0d1117;color:white;min-height:100vh;}
.header{text-align:center;padding:60px 20px;}
.logo{font-size:35px;font-weight:bold;color:#00f2ff;}
.subjects{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;padding:20px;}
.card{background:#161b22;padding:30px;border-radius:15px;text-align:center;cursor:pointer;border:1px solid #30363d;}
.card:hover{border:1px solid #00f2ff;}
.notes-section{display:none;padding:20px;}
.unit-card{background:#161b22;margin:10px 0;padding:12px;border-radius:8px;cursor:pointer;border:1px solid #30363d;}
.unit-card:hover{border:1px solid #00f2ff;}
#pdfViewerBox{display:none;margin-top:20px;}
#pdfFrame{width:100%;height:500px;border-radius:10px;border:1px solid #00f2ff;}
.owner-btn{background:#00f2ff;color:black;padding:10px 20px;border:none;border-radius:30px;cursor:pointer;}
</style>
</head>

<body>

<div class="header">
<div class="logo">üöÄ STUDY HUB</div>
</div>

<div class="subjects" id="mainGrid"></div>

<div class="notes-section" id="notesArea">
<h2 id="noteTitle"></h2>
<div id="unitList"></div>

<div id="pdfViewerBox">
<iframe id="pdfFrame"></iframe>
<br><br>
<a id="downloadBtn" class="owner-btn" target="_blank" download>‚¨á Download PDF</a>
</div>

<br>
<button class="owner-btn" onclick="goBack()">‚Üê Back</button>
</div>

<script>

let subjectData = {};
let currentSubjectKey = "";

/* LOAD JSON DATA */
fetch("data.json")
.then(res => res.json())
.then(data => {
    subjectData = data;
    renderDashboard();
})
.catch(err => {
    alert("Error loading data.json");
});

/* RENDER SUBJECTS */
function renderDashboard(){
    const grid = document.getElementById("mainGrid");
    grid.innerHTML = "";
    for(let key in subjectData){
        grid.innerHTML += `
        <div class="card" onclick="showNotes('${key}')">
            <i class="${subjectData[key].icon}" style="font-size:40px;color:${subjectData[key].color};"></i>
            <h3>${subjectData[key].title}</h3>
        </div>`;
    }
}

/* SHOW UNITS */
function showNotes(key){
    currentSubjectKey = key;
    document.getElementById("mainGrid").style.display="none";
    document.getElementById("notesArea").style.display="block";
    document.getElementById("noteTitle").innerText = subjectData[key].title;

    let list = document.getElementById("unitList");
    list.innerHTML = "";

    subjectData[key].units.forEach((unit,i)=>{
        list.innerHTML += `
        <div class="unit-card" onclick="openPDF(${i})">
            ${unit}
        </div>`;
    });
}

/* OPEN PDF INSIDE PAGE */
function openPDF(i){
    let link = subjectData[currentSubjectKey].links[i];
    if(link && link !== "#"){
        document.getElementById("pdfViewerBox").style.display="block";
        document.getElementById("pdfFrame").src = link;
        document.getElementById("downloadBtn").href = link;
    }else{
        alert("PDF not available yet.");
    }
}

function goBack(){
    document.getElementById("notesArea").style.display="none";
    document.getElementById("mainGrid").style.display="grid";
    document.getElementById("pdfViewerBox").style.display="none";
}

</script>

</body>
</html>
